<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="A friend showed me something of a design spec they were charged with pulling off: The requirements:  when I click on any of them it expands at the top to full width and the rest of the cards re-arrange themselves below it."><meta name=generator content="Hugo 0.98.0"><meta name=robots content="index,follow,noarchive"><title>Expanding Grid Cards with View Transitions Chris Coyier &#183;</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css><!--[if lte IE 8]><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css><!--<![endif]--><!--[if lte IE 8]><link rel=stylesheet href=https://assets.cdnweb.info/hugo/blackburn/css/side-menu-old-ie.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=https://assets.cdnweb.info/hugo/blackburn/css/side-menu.css><!--<![endif]--><link rel=stylesheet href=https://assets.cdnweb.info/hugo/blackburn/css/blackburn.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel=stylesheet type=text/css><script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/styles/androidstudio.min.css><script async src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.6.0/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script><link rel="shortcut icon" href=./img/favicon.ico type=image/x-icon></head><body><div id=layout><a href=#menu id=menuLink class=menu-link><span></span></a><div id=menu><a class="pure-menu-heading brand" href=./index.html>PicoD</a><div class=pure-menu><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=./index.html><i class="fa fa-home fa-fw"></i>Home</a></li><li class=pure-menu-item><a class=pure-menu-link href=./post/index.html><i class="fa fa-list fa-fw"></i>Posts</a></li><li class=pure-menu-item><a class=pure-menu-link href=./sitemap.xml><i class="fa fa-user fa-fw"></i>Sitemap</a></li><li class=pure-menu-item><a class=pure-menu-link href=./index.xml><i class="fa fa-phone fa-fw"></i>RSS</a></li></ul></div><div class="pure-menu social"><ul class=pure-menu-list></ul></div><div><div class=small-print><small>&copy; 2022. All rights reserved.</small></div><div class=small-print><small>Built with&nbsp;<a href=https://gohugo.io/ target=_blank>Hugo</a></small>
<small>Theme&nbsp;<a href=https://github.com/yoshiharuyamashita/blackburn target=_blank>Blackburn</a></small></div></div></div><div id=main><div class=header><h1>Expanding Grid Cards with View Transitions Chris Coyier</h1><h2>A friend showed me something of a design spec they were charged with pulling off: The requirements: when I click on any of them it expands at the top to full width and the rest of the cards re-arrange themselves below it.</h2></div><div class=content><div class=post-meta><div><i class="fa fa-calendar fa-fw"></i>
<time>02 Feb 2024, 00:00</time></div></div><p>A friend showed me something of a design spec they were charged with pulling off:</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/i0.wp.com/chriscoyier.net/wp-content/uploads/2023/04/screen_shot_2023-04-03_at_7.06.37_pm_720.png><p>The requirements:</p><p>‚Ä¶ when I click on any of them it expands at the top to full width and the rest of the cards re-arrange themselves below it.</p><p>Like anything web design & development, there are a boatload of ways you could do this. Different layout strategies, different combinations of native technologies, different libraries to punt to, etc. I lean native first, so this was how my brain scripted the problem:</p><li>Six cards on a fluid, flex-column CSS Grid. Let cards <code>auto</code> flow onto the grid.</li><li>When you click a card (instant üò¨), donk it at the top by <code>order: -1;</code> (another üò¨)</li><li>Make it full width regardless of columns via <code>grid-column: 1 / -1;</code></li><li>I suppose we could animate this ‚Äúfor free‚Äù FLIP-style with the View Transition API.</li><p>And so:</p><p>Video here. Note that <strong>only Chrome</strong> supports View Transitions. This video shows them, but the rest of it should work regardless of browser.</p><figure class="wp-block-video wp-block-embed is-type-video is-provider-videopress">The ‚Äúalternate look‚Äù shows off how a little <code>:has()</code> selector can go a long way in interactive fun!</figure><h3 class=wp-block-heading><a href=# aria-hidden=true class=aal_anchor id=the-grid></a>The Grid</h3><p>Pretty easy these days, so I‚Äôll make it complicated just for fun:</p><pre class=wp-block-code aria-describedby=shcb-language-1 data-shcb-language-name=SCSS data-shcb-language-slug=scss><span><code class="hljs language-scss"><span class=hljs-selector-class>.grid</span> { <span class=hljs-attribute>display</span>: grid; grid-template-<span class=hljs-attribute>columns</span>: repeat( auto-fit, /* fluid columns, but max out at <span class=hljs-number>3</span> */ minmax(min(<span class=hljs-number>100%</span>, max(<span class=hljs-number>10rem</span>, <span class=hljs-number>100%</span>/<span class=hljs-number>4</span>)), <span class=hljs-number>1</span>fr) ); gap: <span class=hljs-number>2.5rem</span>; }</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>SCSS</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>scss</span><span class=shcb-language__paren>)</span></pre><p>This incantation of <code>grid-template-columns</code> says:</p><li>This grid is is fluid (the columns are of a fluid width)</li><li>The number of columns is fluid, starting at just 1, which shrinks as narrow as it needs to (it‚Äôs not limited by some fixed minimum width)</li><li>Only go up to 3 columns, not unlimited as you normally see</li><li>Break into two columns at a reasonable middle ground</li><p>A bit complex, but a useful bit of code there that can be expressed without media queries. I‚Äôm sure I‚Äôll come back to this blog post for that over and over.</p><h3 class=wp-block-heading><a href=# aria-hidden=true class=aal_anchor id=the-move></a>The Move</h3><p>To make sure the clicked card becomes the first one, I‚Äôll toggle a class:</p><pre class=wp-block-code aria-describedby=shcb-language-2 data-shcb-language-name=SCSS data-shcb-language-slug=scss><span><code class="hljs language-scss"><span class=hljs-selector-class>.card</span> { ... &amp;<span class=hljs-selector-class>.featured</span> { <span class=hljs-attribute>order</span>: -<span class=hljs-number>1</span>; grid-column: <span class=hljs-number>1</span> / -<span class=hljs-number>1</span>; <span class=hljs-attribute>font-size</span>: <span class=hljs-number>133%</span>; } }</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>SCSS</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>scss</span><span class=shcb-language__paren>)</span></pre><pre class=wp-block-code aria-describedby=shcb-language-3 data-shcb-language-name=JavaScript data-shcb-language-slug=javascript><span><code class="hljs language-javascript"><span class=hljs-keyword>const</span> cards = <span class=hljs-built_in>document</span>.querySelectorAll(<span class=hljs-string>".card"</span>); cards.forEach(<span class=hljs-function>(<span class=hljs-params>card, i</span>) =&gt;</span> { card.addEventListener(<span class=hljs-string>"click"</span>, () =&gt; { activateCard(card); }); }); <span class=hljs-function><span class=hljs-keyword>function</span> <span class=hljs-title>activateCard</span>(<span class=hljs-params>card</span>) </span>{ cards.forEach(<span class=hljs-function>(<span class=hljs-params>card</span>) =&gt;</span> { card.classList.remove(<span class=hljs-string>"featured"</span>); }); card.classList.add(<span class=hljs-string>"featured"</span>); }</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>JavaScript</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>javascript</span><span class=shcb-language__paren>)</span></pre><h3 class=wp-block-heading><a href=# aria-hidden=true class=aal_anchor id=animate-it></a>Animate It</h3><p>This is essentially a tweening (sometimes called FLIP) animation where you don‚Äôt really care about the starting or ending state per se you just say: animate between them please.</p><p>The trick there is the <a href=#>View Transitions API</a>, which means you just wrap any DOM manipulation in there and it‚Äôll automatically animate. Here I‚Äôll ensure the DOM changes even if the browser doesn‚Äôt have that API yet.</p><pre class=wp-block-code aria-describedby=shcb-language-4 data-shcb-language-name=JavaScript data-shcb-language-slug=javascript><span><code class="hljs language-javascript"><span class=hljs-keyword>if</span> (!<span class=hljs-built_in>document</span>.startViewTransition) { activateCard(card); } <span class=hljs-built_in>document</span>.startViewTransition(<span class=hljs-function><span class=hljs-params>()</span> =&gt;</span> { activateCard(card); });</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>JavaScript</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>javascript</span><span class=shcb-language__paren>)</span></pre><p>That‚Äôs ridiculously simple. I love it.</p><p>I popped a close button on each card also which just de-features all cards, and calls the same API.</p><h3 class=wp-block-heading><a href=# aria-hidden=true class=aal_anchor id=the-accessibility-situation></a>The Accessibility Situation</h3><p>I‚Äôve attached a click handler to a damn <code>&lt;div></code> here. That‚Äôs not right. A user using a screen reader won‚Äôt be able to activate the animation because the <code>&lt;div></code> is not interactive itself.</p><p>But‚Ä¶ maybe that‚Äôs OK?</p><p>This is what you might call a ‚Äúfidget spinner animation‚Äù. It doesn‚Äôt do anything important. No information is revealed. It‚Äôs just something you can click on for poops and giggles.</p><p>The second we reveal some additional information‚Ä¶ then we‚Äôre in trouble here. Then we need to attach the activation to an interactive element, probably a <code>&lt;button></code>. And as soon as we do that then the fact that we‚Äôre changing the tabbing order by messing with <code>order</code> becomes problematic. Tabbing order is no longer intuitive when the 4th item can appear at the top yet send focus to the 5th item just because that‚Äôs where it is in the DOM. Perhaps you could fight that by setting tabindex values ourselves, but that seems like a can of worms. Honestly, if this was revealing extra information, I‚Äôd probably just not take this approach at all and find some other more suitable way.</p><p>Text selection is a minor concern. It‚Äôs a little annoying how you can select text and un-clicking after dragging activates the click and the text goes flying away from you. I say minor because the text remains selected so it‚Äôs not a 100% blocker.</p><p>Another form of accessibility is not making people nauseous, so might as well honor the preference for reduced motion. Easy as CSS:</p><pre class=wp-block-code aria-describedby=shcb-language-5 data-shcb-language-name=CSS data-shcb-language-slug=css><span><code class="hljs language-css"><span class=hljs-keyword>@media</span> (<span class=hljs-attribute>prefers-reduced-motion:</span> reduce) { <span class=hljs-selector-pseudo>::view-transition-old(</span>*), <span class=hljs-selector-pseudo>::view-transition-new(</span>*) { <span class=hljs-attribute>animation-duration</span>: <span class=hljs-number>0s</span>; } }</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>CSS</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>css</span><span class=shcb-language__paren>)</span></pre><h3 class=wp-block-heading><a href=# aria-hidden=true class=aal_anchor id=another-little-view-transitions-thing></a>Another little View Transitions Thing</h3><p>A hamburger interaction where the lines of the hamburger fly out to become the borders of the navigation drawer. This one not only uses View Transitions but native CSS nesting too just for fun.</p><p><h3 class=jp-relatedposts-headline>Related</h3></p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmibmKe2tK%2FOsqCeql6jsrV7kWlpbGdgaXxyfY6er6mZnpm2r7OMoKminF2YrrOw0mauoqyYYsOqsdZmq6uZnqi2tbXOp6po</p><h4><i class="fas fa-share-alt" aria-hidden=true></i>&nbsp;Share!</h4><ul class=share-buttons><li><a href="https://www.facebook.com/sharer/sharer.php?u=%2fexpanding-grid-cards-with-view-transitions.html" target=_blank title="Share on Facebook"><i class="fab fa-facebook" aria-hidden=true></i><span class=sr-only>Share on Facebook</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="https://twitter.com/intent/tweet?source=%2fexpanding-grid-cards-with-view-transitions.html" target=_blank title=Tweet><i class="fab fa-twitter" aria-hidden=true></i><span class=sr-only>Tweet</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="https://plus.google.com/share?url=%2fexpanding-grid-cards-with-view-transitions.html" target=_blank title="Share on Google+"><i class="fab fa-google-plus" aria-hidden=true></i><span class=sr-only>Share on Google+</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="http://www.tumblr.com/share?v=3&u=%2fexpanding-grid-cards-with-view-transitions.html" target=_blank title="Post to Tumblr"><i class="fab fa-tumblr" aria-hidden=true></i><span class=sr-only>Post to Tumblr</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="http://pinterest.com/pin/create/button/?url=%2fexpanding-grid-cards-with-view-transitions.html" target=_blank title="Pin it"><i class="fab fa-pinterest-p" aria-hidden=true></i><span class=sr-only>Pin it</span></a></li>&nbsp;&nbsp;&nbsp;<li><a href="http://www.reddit.com/submit?url=%2fexpanding-grid-cards-with-view-transitions.html" target=_blank title="Submit to Reddit"><i class="fab fa-reddit-alien" aria-hidden=true></i><span class=sr-only>Submit to Reddit</span></a></li></ul><style>ul.share-buttons{list-style:none;padding:0}ul.share-buttons li{display:inline}ul.share-buttons .sr-only{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden}</style><div class="prev-next-post pure-g"><div class=pure-u-1-24 style=text-align:left><a href=./sisley-paris-volumizing-spray-review.html><i class="fa fa-chevron-left"></i></a></div><div class=pure-u-10-24><nav class=prev><a href=./sisley-paris-volumizing-spray-review.html>Jennifer Aniston's Volumizing Secret Is My Go-To for Thin Hair</a></nav></div><div class=pure-u-2-24>&nbsp;</div><div class=pure-u-10-24><nav class=next><a href=./dmx-dead-at-50-following-heart-attack.html>DMX Dead At 50 Following Heart Attack</a></nav></div><div class=pure-u-1-24 style=text-align:right><a href=./dmx-dead-at-50-following-heart-attack.html><i class="fa fa-chevron-right"></i></a></div></div></div></div></div><script src=https://assets.cdnweb.info/hugo/blackburn/js/ui.js></script>
<script src=https://assets.cdnweb.info/hugo/blackburn/js/menus.js></script>
<script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>